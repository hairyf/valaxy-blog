import{_ as d}from"./ValaxyMain.vue_vue_type_script_setup_true_lang-_PHymMwZ.js";import{b as u,e as g,w as t,f as D,a as y,p as r,g as i,h as l,i as m,r as e}from"./app-C5E7XBok.js";const A={__name:"rollup",setup(F,{expose:o}){const n=JSON.parse('{"title":"Rollup - JavaScript 模块打包器","description":"","frontmatter":{"title":"Rollup - JavaScript 模块打包器","date":"2021-10-02","categories":["Notes","Client","bundler"],"tags":["grunt"]},"headers":[{"level":2,"title":"Rollup vs Webpack","slug":"rollup-vs-webpack","link":"#rollup-vs-webpack","children":[]},{"level":2,"title":"基本使用","slug":"基本使用","link":"#基本使用","children":[]},{"level":2,"title":"Config API","slug":"config-api","link":"#config-api","children":[{"level":3,"title":"输入(input -i/--input)","slug":"输入-input-i-input","link":"#输入-input-i-input","children":[]},{"level":3,"title":"文件(file -o/--output.file)","slug":"文件-file-o-output-file","link":"#文件-file-o-output-file","children":[]},{"level":3,"title":"格式(format -f/--output.format)","slug":"格式-format-f-output-format","link":"#格式-format-f-output-format","children":[]},{"level":3,"title":"生成包名称(name -n/--name)","slug":"生成包名称-name-n-name","link":"#生成包名称-name-n-name","children":[]},{"level":3,"title":"插件(plugins)#","slug":"插件-plugins","link":"#插件-plugins","children":[]},{"level":3,"title":"外链(external -e/--external)","slug":"外链-external-e-external","link":"#外链-external-e-external","children":[]},{"level":3,"title":"全局模块(globals -g/--globals)","slug":"全局模块-globals-g-globals","link":"#全局模块-globals-g-globals","children":[]}]},{"level":2,"title":"JavaScript API","slug":"javascript-api","link":"#javascript-api","children":[]},{"level":2,"title":"Custom Plugin","slug":"custom-plugin","link":"#custom-plugin","children":[]}],"relativePath":"pages/posts/notes/client/module/builds/rollup.md","path":"/home/runner/work/valaxy-blog/valaxy-blog/pages/posts/notes/client/module/builds/rollup.md","lastUpdated":1725453888000}'),h=y(),k=n.frontmatter||{};return h.meta.frontmatter=Object.assign(h.meta.frontmatter||{},n.frontmatter||{}),r("pageData",n),r("valaxy:frontmatter",k),globalThis.$frontmatter=k,o({frontmatter:{title:"Rollup - JavaScript 模块打包器",date:"2021-10-02",categories:["Notes","Client","bundler"],tags:["grunt"]}}),(a,s)=>{const p=d;return u(),g(p,{frontmatter:D(k)},{"main-content-md":t(()=>[s[0]||(s[0]=i("p",null,"Rollup 是一个 JavaScript 模块打包器，可以将小块代码编译成大块复杂的代码，例如 library 或应用程序。",-1)),s[1]||(s[1]=i("blockquote",null,[i("p",null,"官方简述：Rollup 对代码模块使用新的标准化格式，这些标准都包含在 JavaScript 的 ES6 版本中，而不是以前的特殊解决方案，如 CommonJS 和 AMD。ES6 模块可以使你自由、无缝地使用你最喜爱的 library 中那些最有用独立函数，而你的项目不必携带其他未使用的代码。ES6 模块最终还是要由浏览器原生实现，但当前 Rollup 可以使你提前体验。")],-1)),s[2]||(s[2]=i("p",null,[l("可以看出 rollup 是以 ES6 模块化为基调的打包工具，rollup 可以支持 ES6 模块转换为 iife、cjs、umd 模块，支持打包后 浏览器、Node 环境运行，使用 "),i("a",{href:"https://github.com/rollup/rollup-plugin-commonjs",target:"_blank",rel:"noreferrer"},"rollup-plugin-commonjs"),l(" 还可以导入 commonjs 模块。")],-1)),m(" more "),s[3]||(s[3]=i("h2",{id:"rollup-vs-webpack",tabindex:"-1"},[l("Rollup vs Webpack "),i("a",{class:"header-anchor",href:"#rollup-vs-webpack","aria-label":'Permalink to "Rollup vs Webpack"'},"​")],-1)),s[4]||(s[4]=i("p",null,[i("code",null,"Webpack"),l("对于代码分割和静态资源导入有着“先天优势”，并且支持热模块替换(HMR)，而"),i("code",null,"Rollup"),l("并不支持，所以当项目需要用到以上，则可以考虑选择"),i("code",null,"Webpack"),l("。")],-1)),s[5]||(s[5]=i("p",null,[i("code",null,"Rollup"),l(" 对于代码的 "),i("code",null,"Tree-shaking"),l(" 和 "),i("code",null,"ES6"),l(" 模块有着算法优势上的支持，若你项目只需要打包出一个简单的 "),i("code",null,"bundle"),l(" 包，并是基于 "),i("code",null,"ES6"),l(" 模块开发的，可以考虑使用 "),i("code",null,"Rollup")],-1)),s[6]||(s[6]=i("p",null,[l("其实"),i("code",null,"Webpack"),l("从"),i("code",null,"2.0"),l("开始已经支持"),i("code",null,"Tree-shaking"),l("，并在使用"),i("code",null,"babel-loader"),l("的情况支持了"),i("code",null,"es6 module"),l("的打包")],-1)),s[7]||(s[7]=i("p",null,[l("但是"),i("code",null,"Rollup"),l("并没有被抛弃，反而因其简单的API、使用方式被许多库开发者青睐，如"),i("code",null,"React"),l("、"),i("code",null,"Vue"),l("等，都是使用"),i("code",null,"Rollup"),l("作为构建工具的。")],-1)),s[8]||(s[8]=i("h2",{id:"基本使用",tabindex:"-1"},[l("基本使用 "),i("a",{class:"header-anchor",href:"#基本使用","aria-label":'Permalink to "基本使用"'},"​")],-1)),s[9]||(s[9]=i("p",null,[l("使用 "),i("code",null,"npm install --global rollup"),l(" 进行安装。Rollup 可以通过"),i("a",{href:"https://github.com/rollup/rollup/wiki/Command-Line-Interface",target:"_blank",rel:"noreferrer"},"命令行接口(command line interface)"),l("配合可选配置文件(optional configuration file)来调用，或者可以通过 "),i("a",{href:"https://github.com/rollup/rollup/wiki/JavaScript-API",target:"_blank",rel:"noreferrer"},"JavaScript API"),l("来调用。运行 "),i("code",null,"rollup --help"),l(" 可以查看可用的选项和参数。")],-1)),s[10]||(s[10]=i("p",null,"假设应用程序入口起点的名称为 main.js，并且你想要所有 import 的依赖(all imports)都编译到一个名为 bundle.js 的单个文件中。",-1)),s[11]||(s[11]=i("p",null,"对于浏览器：",-1)),s[12]||(s[12]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"# 编译为包含自执行函数的 <script> ('iife')")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#FFCB6B","--shiki-light":"#E2931D"}},"$"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," rollup"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," main.js"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," --file"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," bundle.js"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," --format"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," iife")])])]),i("button",{class:"collapse"})],-1)),s[13]||(s[13]=i("p",null,"对于 Node.js:",-1)),s[14]||(s[14]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"# 编译为 CommonJS 模块 ('cjs')")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#FFCB6B","--shiki-light":"#E2931D"}},"$"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," rollup"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," main.js"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," --file"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," bundle.js"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," --format"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," cjs")])])]),i("button",{class:"collapse"})],-1)),s[15]||(s[15]=i("p",null,"对于浏览器和 Node.js:",-1)),s[16]||(s[16]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"# UMD 格式需要一个包名 ")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#FFCB6B","--shiki-light":"#E2931D"}},"$"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," rollup"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," main.js"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," --file"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," bundle.js"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," --format"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," umd"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," --name"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},' "'),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"myBundle"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},'"')])])]),i("button",{class:"collapse"})],-1)),s[17]||(s[17]=i("p",null,[l("除此之外，"),i("code",null,"Rollup"),l(" 上面的打包 "),i("code",null,"--format"),l(" 还支持这些选项 "),i("code",null,"amd"),l("、"),i("code",null,"cjs"),l("、"),i("code",null,"system"),l("、"),i("code",null,"es"),l("、"),i("code",null,"iife"),l("、"),i("code",null,"umd")],-1)),s[18]||(s[18]=i("h2",{id:"config-api",tabindex:"-1"},[l("Config API "),i("a",{class:"header-anchor",href:"#config-api","aria-label":'Permalink to "Config API"'},"​")],-1)),s[19]||(s[19]=i("p",null,"上面的命令行方式还不错，但是如果添加更多的选项，这种命令行的方式就显得麻烦了。",-1)),s[20]||(s[20]=i("p",null,"为此，我们可以创建配置文件来囊括所需的选项。配置文件由 JavaScript 写成，比 CLI 更加灵活。",-1)),s[21]||(s[21]=i("p",null,[l("文档："),i("a",{href:"https://www.rollupjs.com/guide/tutorial#%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6using-config-files",target:"_blank",rel:"noreferrer"},"https://www.rollupjs.com/guide/tutorial")],-1)),s[22]||(s[22]=i("h3",{id:"输入-input-i-input",tabindex:"-1"},[l("输入(input "),i("em",null,[i("code",null,"-i"),l("/"),i("code",null,"--input")]),l(") "),i("a",{class:"header-anchor",href:"#输入-input-i-input","aria-label":'Permalink to "输入(input *`-i`/`--input`*)"'},"​")],-1)),s[23]||(s[23]=i("p",null,[i("code",null,"String"),l(" 这个包的入口点 (例如：你的 "),i("code",null,"main.js"),l(" 或者 "),i("code",null,"app.js"),l(" 或者 "),i("code",null,"index.js"),l(")")],-1)),s[24]||(s[24]=i("h3",{id:"文件-file-o-output-file",tabindex:"-1"},[l("文件(file "),i("em",null,[i("code",null,"-o"),l("/"),i("code",null,"--output.file")]),l(") "),i("a",{class:"header-anchor",href:"#文件-file-o-output-file","aria-label":'Permalink to "文件(file *`-o`/`--output.file`*)"'},"​")],-1)),s[25]||(s[25]=i("p",null,[i("code",null,"String"),l(" 要写入的文件。也可用于生成 sourcemaps，如果适用")],-1)),s[26]||(s[26]=i("h3",{id:"格式-format-f-output-format",tabindex:"-1"},[l("格式(format "),i("em",null,[i("code",null,"-f"),l("/"),i("code",null,"--output.format")]),l(") "),i("a",{class:"header-anchor",href:"#格式-format-f-output-format","aria-label":'Permalink to "格式(format *`-f`/`--output.format`*)"'},"​")],-1)),s[27]||(s[27]=i("p",null,[i("code",null,"String"),l(" 生成包的格式。 下列之一:")],-1)),s[28]||(s[28]=i("ul",null,[i("li",null,[i("code",null,"amd"),l(" – 异步模块定义，用于像RequireJS这样的模块加载器")]),i("li",null,[i("code",null,"cjs"),l(" – CommonJS，适用于 Node 和 Browserify/Webpack")]),i("li",null,[i("code",null,"esm"),l(" – 将软件包保存为 ES 模块文件，在现代浏览器中可以通过 "),i("code",null,"<script type=module>"),l(" 标签引入")]),i("li",null,[i("code",null,"iife"),l(" – 一个自动执行的功能，适合作为"),i("code",null,"<script>"),l("标签。（如果要为应用程序创建一个捆绑包，您可能想要使用它，因为它会使文件大小变小。）")]),i("li",null,[i("code",null,"umd"),l(" – 通用模块定义，以"),i("code",null,"amd"),l("，"),i("code",null,"cjs"),l(" 和 "),i("code",null,"iife"),l(" 为一体")]),i("li",null,[i("code",null,"system"),l(" - SystemJS 加载器格式")])],-1)),s[29]||(s[29]=i("h3",{id:"生成包名称-name-n-name",tabindex:"-1"},[l("生成包名称(name "),i("em",null,[i("code",null,"-n"),l("/"),i("code",null,"--name")]),l(") "),i("a",{class:"header-anchor",href:"#生成包名称-name-n-name","aria-label":'Permalink to "生成包名称(name *`-n`/`--name`*)"'},"​")],-1)),s[30]||(s[30]=i("p",null,[i("code",null,"String"),l(" 变量名，代表你的 "),i("code",null,"iife"),l("/"),i("code",null,"umd"),l(" 包，同一页上的其他脚本可以访问它。")],-1)),s[31]||(s[31]=i("div",{class:"language-js vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"js"),i("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"// rollup.config.jsexport default {  ...,  output: {    file: 'bundle.js',    format: 'iife',    name: 'MyBundle'  }};")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"// -> var MyBundle = (function () {...")])])]),i("button",{class:"collapse"})],-1)),s[32]||(s[32]=i("h3",{id:"插件-plugins",tabindex:"-1"},[l("插件(plugins)"),i("a",{href:"https://www.rollupjs.com/guide/tutorial#%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6using-plugins",target:"_blank",rel:"noreferrer"},"#"),l(),i("a",{class:"header-anchor",href:"#插件-plugins","aria-label":'Permalink to "插件(plugins)[#](https://www.rollupjs.com/guide/tutorial#%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6using-plugins)"'},"​")],-1)),s[33]||(s[33]=i("p",null,[l("插件对象 "),i("code",null,"数组 Array"),l(" (或一个插件对象) – 有关详细信息请参阅 "),i("a",{href:"https://www.rollupjs.com/guide/big-list-of-options#getting-started-with-plugins",target:"_blank",rel:"noreferrer"},"插件入门"),l("。记住要调用导入的插件函数(即 "),i("code",null,"commonjs()"),l(", 而不是 "),i("code",null,"commonjs"),l(").")],-1)),s[34]||(s[34]=i("div",{class:"language-js vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"js"),i("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"// rollup.config.jsimport resolve from 'rollup-plugin-node-resolve';import commonjs from 'rollup-plugin-commonjs';")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"export"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}}," default"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," {"),i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}}," entry"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," '"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"main.js"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},","),i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}}," plugins"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},":"),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}}," ["),i("span",{style:{"--shiki-dark":"#82AAFF","--shiki-light":"#6182B8"}},"resolve"),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}},"()"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},","),i("span",{style:{"--shiki-dark":"#82AAFF","--shiki-light":"#6182B8"}}," commonjs"),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}},"()] "),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"}")])])]),i("button",{class:"collapse"})],-1)),s[35]||(s[35]=i("h3",{id:"外链-external-e-external",tabindex:"-1"},[l("外链(external "),i("em",null,[i("code",null,"-e"),l("/"),i("code",null,"--external")]),l(") "),i("a",{class:"header-anchor",href:"#外链-external-e-external","aria-label":'Permalink to "外链(external *`-e`/`--external`*)"'},"​")],-1)),s[36]||(s[36]=i("p",null,[l("两者任一 "),i("code",null,"Function"),l(" 需要一个 "),i("code",null,"id"),l(" 并返回 "),i("code",null,"true"),l("（外部引用）或 "),i("code",null,"false"),l("（不是外部的引用）， 或者 "),i("code",null,"Array"),l(" 应该保留在bundle的外部引用的模块ID。ID应该是：")],-1)),s[37]||(s[37]=i("ol",null,[i("li",null,"外部依赖的名称"),i("li",null,"一个已被找到路径的ID（像文件的绝对路径）")],-1)),s[38]||(s[38]=i("div",{class:"language-js vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"js"),i("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"// rollup.config.jsimport path from 'path';")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"export"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}}," default"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," {"),i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}}," external"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},":"),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}}," ["),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"some-externally-required-library"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},","),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}}," path"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"."),i("span",{style:{"--shiki-dark":"#82AAFF","--shiki-light":"#6182B8"}},"resolve"),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}},"("),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"./src/some-local-file-that-should-not-be-bundled.js"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'"),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}},")] "),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"}")])])]),i("button",{class:"collapse"})],-1)),s[39]||(s[39]=i("p",null,"当作为命令行参数给出时，它应该是以逗号分隔的ID列表：",-1)),s[40]||(s[40]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#FFCB6B","--shiki-light":"#E2931D"}},"rollup"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," -i"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," src/main.js"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," ..."),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," -e"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," foo,bar,baz")])])]),i("button",{class:"collapse"})],-1)),s[41]||(s[41]=i("h3",{id:"全局模块-globals-g-globals",tabindex:"-1"},[l("全局模块(globals "),i("em",null,[i("code",null,"-g"),l("/"),i("code",null,"--globals")]),l(") "),i("a",{class:"header-anchor",href:"#全局模块-globals-g-globals","aria-label":'Permalink to "全局模块(globals *`-g`/`--globals`*)"'},"​")],-1)),s[42]||(s[42]=i("p",null,[i("code",null,"Object"),l(" 形式的 "),i("code",null,"id: name"),l(" 键值对，用于"),i("code",null,"umd"),l("/"),i("code",null,"iife"),l("包。例如：在这样的情况下…")],-1)),s[43]||(s[43]=i("div",{class:"language-js vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"js"),i("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"import"),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}}," $ "),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"from"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," '"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"jquery"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'")])])]),i("button",{class:"collapse"})],-1)),s[44]||(s[44]=i("p",null,[l("告诉 Rollup "),i("code",null,"jquery"),l(" 模块的id等同于 "),i("code",null,"$"),l(" 变量:")],-1)),s[45]||(s[45]=i("div",{class:"language-js vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"js"),i("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"// rollup.config.js")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"export"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}}," default"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," {")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}},"  format"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," '"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"iife"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}},"  name"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," '"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"MyBundle"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}},"  globals"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," {")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}},"    jquery"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," '"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"$"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"  }")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"}")]),l(`
`),i("span",{class:"line"}),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"/*")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"var MyBundle = (function ($) {")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"  // 代码到这里")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"}(window.jQuery));")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#545454","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"*/")])])]),i("button",{class:"collapse"})],-1)),s[46]||(s[46]=i("p",null,"或者，提供将外部模块ID转换为全局模块的功能。",-1)),s[47]||(s[47]=i("p",null,"当作为命令行参数给出时，它应该是一个逗号分隔的“id：name”键值对列表：",-1)),s[48]||(s[48]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#FFCB6B","--shiki-light":"#E2931D"}},"rollup"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," -i"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," src/main.js"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," ..."),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," -g"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," jquery:"),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}},"$"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},",lodash:_")])])]),i("button",{class:"collapse"})],-1)),s[49]||(s[49]=i("h2",{id:"javascript-api",tabindex:"-1"},[l("JavaScript API "),i("a",{class:"header-anchor",href:"#javascript-api","aria-label":'Permalink to "JavaScript API"'},"​")],-1)),s[50]||(s[50]=i("p",null,"Rollup 提供 JavaScript 接口那样可以通过 Node.js 来使用。你可以很少使用，而且很可能使用命令行接口，除非你想扩展 Rollup 本身，或者用于一些难懂的任务，例如用代码把文件束生成出来，主要有两个 API （rollup.rollup，rollup.watch）。",-1)),s[51]||(s[51]=i("p",null,[l("文档："),i("a",{href:"https://www.rollupjs.com/guide/javascript-api",target:"_blank",rel:"noreferrer"},"https://www.rollupjs.com/guide/javascript-api")],-1)),s[52]||(s[52]=i("h2",{id:"custom-plugin",tabindex:"-1"},[l("Custom Plugin "),i("a",{class:"header-anchor",href:"#custom-plugin","aria-label":'Permalink to "Custom Plugin"'},"​")],-1)),s[53]||(s[53]=i("div",{class:"language-js vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"js"),i("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#FFCB6B","--shiki-light":"#E2931D"}},"plugins"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},":"),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}}," [")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#82AAFF","--shiki-light":"#6182B8"}},"  babel"),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}},"()"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#82AAFF","--shiki-light":"#6182B8"}},"  uglify"),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}},"()"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"  {")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}},"    name"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," '"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"replace"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},",")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}},"    transformBundle"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"("),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"code"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},")"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," {")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5","--shiki-dark-font-style":"italic","--shiki-light-font-style":"italic"}},"      return"),i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}}," code")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"        ."),i("span",{style:{"--shiki-dark":"#82AAFF","--shiki-light":"#6182B8"}},"replace"),i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}},"("),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"关键词"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},","),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," '"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"替换内容"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'"),i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}},")")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"        ."),i("span",{style:{"--shiki-dark":"#82AAFF","--shiki-light":"#6182B8"}},"replace"),i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}},"("),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"/"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"正则"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"/"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},","),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}}," '"),i("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}},"替换内容"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"'"),i("span",{style:{"--shiki-dark":"#F07178","--shiki-light":"#E53935"}},")")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"    },")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#39ADB5"}},"  },")]),l(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#EEFFFF","--shiki-light":"#90A4AE"}},"]")])])]),i("button",{class:"collapse"})],-1)),s[54]||(s[54]=i("blockquote",null,[i("p",null,"有意思的是，rollup 同样支持 Virtual Modules （虚拟模块）也就是在 rollup 中可以跟 esbuild 一样实施一个虚拟模块。")],-1))]),"main-header":t(()=>[e(a.$slots,"main-header")]),"main-header-after":t(()=>[e(a.$slots,"main-header-after")]),"main-nav":t(()=>[e(a.$slots,"main-nav")]),"main-content":t(()=>[e(a.$slots,"main-content")]),"main-content-after":t(()=>[e(a.$slots,"main-content-after")]),"main-nav-before":t(()=>[e(a.$slots,"main-nav-before")]),"main-nav-after":t(()=>[e(a.$slots,"main-nav-after")]),comment:t(()=>[e(a.$slots,"comment")]),footer:t(()=>[e(a.$slots,"footer")]),aside:t(()=>[e(a.$slots,"aside")]),"aside-custom":t(()=>[e(a.$slots,"aside-custom")]),default:t(()=>[e(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{A as default};
