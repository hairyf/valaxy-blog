import{_ as u}from"./ValaxyMain.vue_vue_type_script_setup_true_lang-_PHymMwZ.js";import{b as p,e as c,w as n,f as g,a as b,p as d,g as t,h as l,i as k,r as i}from"./app-C5E7XBok.js";const P={__name:"interface",setup(y,{expose:m}){const o=JSON.parse('{"title":"微信公众号接口凭证","description":"","frontmatter":{"title":"微信公众号接口凭证","date":"2020-04-04 16:00:00","categories":["Notes","Client","Official Account"],"tags":["Official Account"]},"headers":[{"level":2,"title":"接收与响应微信服务","slug":"接收与响应微信服务","link":"#接收与响应微信服务","children":[]},{"level":2,"title":"接收消息并回复","slug":"接收消息并回复","link":"#接收消息并回复","children":[]},{"level":2,"title":"创建定制菜单","slug":"创建定制菜单","link":"#创建定制菜单","children":[]}],"relativePath":"pages/posts/notes/client/multi-terminal/official-account/interface.md","path":"/home/runner/work/valaxy-blog/valaxy-blog/pages/posts/notes/client/multi-terminal/official-account/interface.md","lastUpdated":1725453888000}'),r=b(),s=o.frontmatter||{};return r.meta.frontmatter=Object.assign(r.meta.frontmatter||{},o.frontmatter||{}),d("pageData",o),d("valaxy:frontmatter",s),globalThis.$frontmatter=s,m({frontmatter:{title:"微信公众号接口凭证",date:"2020-04-04 16:00:00",categories:["Notes","Client","Official Account"],tags:["Official Account"]}}),(a,e)=>{const f=u;return p(),c(f,{frontmatter:g(s)},{"main-content-md":n(()=>[e[0]||(e[0]=t("p",null,[t("code",null,"access_token"),l(" 是公众号的全局唯一接口调用凭据，公众号调用各接口时都需使用 "),t("code",null,"access_token"),l("。开发者需要进行妥善保存。"),t("code",null,"access_token"),l(" 的存储至少要保留 512 个字符空间。"),t("code",null,"access_token"),l(" 的有效期目前为2个小时，需定时刷新，重复获取将导致上次获取的 "),t("code",null,"access_token"),l(" 失效。")],-1)),k(" more "),e[1]||(e[1]=t("p",null,[l("请求地址："),t("a",{href:"https://api.weixin.qq.com/cgi-bin/token",target:"_blank",rel:"noreferrer"},"https://api.weixin.qq.com/cgi-bin/token"),l(" 请求参数：")],-1)),e[2]||(e[2]=t("ul",null,[t("li",null,[t("code",null,"grant_type"),l("："),t("code",null,"client_credential")]),t("li",null,[t("code",null,"appid"),l("：第三方用户唯一凭证")]),t("li",null,[t("code",null,"secret"),l("：第三方用户唯一凭证密钥")])],-1)),e[3]||(e[3]=t("p",null,"实际流程：",-1)),e[4]||(e[4]=t("figure",null,[t("img",{src:"https://pic.imgdb.cn/item/62f4ccf616f2c2beb1d0ee77.jpg",alt:"",loading:"lazy",decoding:"async"})],-1)),e[5]||(e[5]=t("h2",{id:"接收与响应微信服务",tabindex:"-1"},[l("接收与响应微信服务 "),t("a",{class:"header-anchor",href:"#接收与响应微信服务","aria-label":'Permalink to "接收与响应微信服务"'},"​")],-1)),e[6]||(e[6]=t("p",null,"微信服务器会发送两种类型消息给开发者服务器，GET 请求则验证服务器有效性，POST 则是将用户发送的数据以 POST 请求转发到开发者服务器上。",-1)),e[7]||(e[7]=t("p",null,"POST 服务器接收微信服务器类型：",-1)),e[8]||(e[8]=t("figure",null,[t("img",{src:"https://pic.imgdb.cn/item/62f4cda616f2c2beb1d2c825.jpg",alt:"",loading:"lazy",decoding:"async"})],-1)),e[9]||(e[9]=t("p",null,"POST 服务器响应微信服务器类型：",-1)),e[10]||(e[10]=t("figure",null,[t("img",{src:"https://pic.imgdb.cn/item/62f4cdf616f2c2beb1d3a28a.jpg",alt:"",loading:"lazy",decoding:"async"})],-1)),e[11]||(e[11]=t("blockquote",null,[t("p",null,"如果开发者服务器没有返回响应，微信服务器会发送多三次响应，接收请求体中的数据，是流体数据，不能直接拿到数据，数据接收完毕后，是 Buffer 对象。转换后是 xml 数据。")],-1)),e[12]||(e[12]=t("h2",{id:"接收消息并回复",tabindex:"-1"},[l("接收消息并回复 "),t("a",{class:"header-anchor",href:"#接收消息并回复","aria-label":'Permalink to "接收消息并回复"'},"​")],-1)),e[13]||(e[13]=t("figure",null,[t("img",{src:"https://pic.imgdb.cn/item/62f4ce4e16f2c2beb1d48e62.jpg",alt:"",loading:"lazy",decoding:"async"})],-1)),e[14]||(e[14]=t("h2",{id:"创建定制菜单",tabindex:"-1"},[l("创建定制菜单 "),t("a",{class:"header-anchor",href:"#创建定制菜单","aria-label":'Permalink to "创建定制菜单"'},"​")],-1)),e[15]||(e[15]=t("blockquote",null,[t("p",null,"注意：调用删除菜单接口需要向 params 传入 access_token，调用创建菜单需要向请求体传入 json 数据。")],-1)),e[16]||(e[16]=t("figure",null,[t("img",{src:"https://pic.imgdb.cn/item/62f4ce7a16f2c2beb1d50208.jpg",alt:"",loading:"lazy",decoding:"async"})],-1))]),"main-header":n(()=>[i(a.$slots,"main-header")]),"main-header-after":n(()=>[i(a.$slots,"main-header-after")]),"main-nav":n(()=>[i(a.$slots,"main-nav")]),"main-content":n(()=>[i(a.$slots,"main-content")]),"main-content-after":n(()=>[i(a.$slots,"main-content-after")]),"main-nav-before":n(()=>[i(a.$slots,"main-nav-before")]),"main-nav-after":n(()=>[i(a.$slots,"main-nav-after")]),comment:n(()=>[i(a.$slots,"comment")]),footer:n(()=>[i(a.$slots,"footer")]),aside:n(()=>[i(a.$slots,"aside")]),"aside-custom":n(()=>[i(a.$slots,"aside-custom")]),default:n(()=>[i(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{P as default};
