import{_ as g}from"./ValaxyMain.vue_vue_type_script_setup_true_lang-_PHymMwZ.js";import{b as m,e as y,w as o,f,a as b,p as r,g as l,i as w,h as t,r as i}from"./app-C5E7XBok.js";const B={__name:"index",setup(k,{expose:p}){const s=JSON.parse('{"title":"Windows 关于 C++ 集成的 node 插件配置","description":"","frontmatter":{"title":"Windows 关于 C++ 集成的 node 插件配置","date":"2023-12-05 14:00:00","categories":["Notes","Client","Options"],"tags":["Options"]},"headers":[{"level":2,"title":"1. 安装 windows-build-tools","slug":"_1-安装-windows-build-tools","link":"#_1-安装-windows-build-tools","children":[]},{"level":2,"title":"2. 安装 python3","slug":"_2-安装-python3","link":"#_2-安装-python3","children":[]},{"level":2,"title":"3. 安装 C++ 环境","slug":"_3-安装-c-环境","link":"#_3-安装-c-环境","children":[]},{"level":2,"title":"4. 安装 node-gyp","slug":"_4-安装-node-gyp","link":"#_4-安装-node-gyp","children":[]}],"relativePath":"pages/posts/notes/client/options/index.md","path":"/home/runner/work/valaxy-blog/valaxy-blog/pages/posts/notes/client/options/index.md","lastUpdated":1725453888000}'),d=b(),a=s.frontmatter||{};return d.meta.frontmatter=Object.assign(d.meta.frontmatter||{},s.frontmatter||{}),r("pageData",s),r("valaxy:frontmatter",a),globalThis.$frontmatter=a,p({frontmatter:{title:"Windows 关于 C++ 集成的 node 插件配置",date:"2023-12-05 14:00:00",categories:["Notes","Client","Options"],tags:["Options"]}}),(e,n)=>{const u=g;return m(),y(u,{frontmatter:f(a)},{"main-content-md":o(()=>[n[0]||(n[0]=l("p",null,"在一些特殊的开发场景上，会用到 node-gyp，它需要 C++ 集成的工具和 python3，遇到了挺多坑点，整理一下自己踩过的坑，和具体配置的流程。",-1)),n[1]||(n[1]=l("p",null,"node-gyp 是一个可以编译 node 插件的工具，在使用 node-gyp 前需要安装 python 环境和 C++ 环境。",-1)),w(" more "),n[2]||(n[2]=l("h2",{id:"_1-安装-windows-build-tools",tabindex:"-1"},[t("1. 安装 "),l("strong",null,"windows-build-tools"),t(),l("a",{class:"header-anchor",href:"#_1-安装-windows-build-tools","aria-label":'Permalink to "1. 安装 **windows-build-tools**"'},"​")],-1)),n[3]||(n[3]=l("p",null,[t("我有去尝试过不使用 "),l("code",null,"windows-build-tools"),t(" 去安装，但都会提示 "),l("code",null,"gyp ERR! stack Error: Could not find any Visual Studio installation to use"),t("，虽然说 "),l("code",null,"windows-build-tools"),t(" 不在维护，但这个包能帮助我们一键安装 node-gyp 所需要的 python 环境和 C++ 环境。")],-1)),n[4]||(n[4]=l("p",null,[t("但 "),l("code",null,"windows-build-tools"),t(" 包已经不维护了。如需要继续使用的话，我们可以将 python2.7 替换成 python3。")],-1)),n[5]||(n[5]=l("p",null,[l("strong",null,"具体步骤如下:")],-1)),n[6]||(n[6]=l("ol",null,[l("li",null,[t("采用管理员模式开启 cmd 或者 powershell, 安装 "),l("code",null,"windows-build-tools")])],-1)),n[7]||(n[7]=l("div",{class:"language-sh vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"sh"),l("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-dark":"#FFCB6B","--shiki-light":"#E2931D"}},"npm"),l("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," install"),l("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," --global"),l("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," --production"),l("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," windows-build-tools")])])]),l("button",{class:"collapse"})],-1)),n[8]||(n[8]=l("ol",{start:"2"},[l("li",null,"如果遇到了 successfully installed python 卡着、界面不动了情况")],-1)),n[9]||(n[9]=l("figure",null,[l("img",{src:"https://pic.imgdb.cn/item/656ef3cec458853aef8b30fe.webp",alt:"20210523095213711.png",loading:"lazy",decoding:"async"})],-1)),n[10]||(n[10]=l("p",null,[t("不要慌，疑似 window-build-tools 自带的bug，"),l("a",{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Ffelixrieseberg%2Fwindows-build-tools%2Fissues%2F244",target:"_blank",rel:"noreferrer"},"可查看相关issue链接")],-1)),n[11]||(n[11]=l("figure",null,[l("img",{src:"https://pic.imgdb.cn/item/656ef3dfc458853aef8b684e.webp",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),n[12]||(n[12]=l("p",null,[l("strong",null,"解决方案:")],-1)),n[13]||(n[13]=l("ol",null,[l("li",null,[t("打开资源管理器（左下角搜索-资源管理器或者直接window+E），在路径处输入"),l("code",null,"%temp%")])],-1)),n[14]||(n[14]=l("figure",null,[l("img",{src:"https://pic.imgdb.cn/item/656ef3e6c458853aef8b7f01.webp",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),n[15]||(n[15]=l("ol",{start:"2"},[l("li",null,[t("在"),l("code",null,"%temp%"),t("目录下创建一个名为"),l("code",null,"dd_client_.log"),t("的文件")])],-1)),n[16]||(n[16]=l("figure",null,[l("img",{src:"https://pic.imgdb.cn/item/656ef3edc458853aef8b9405.webp",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),n[17]||(n[17]=l("ol",{start:"3"},[l("li",null,[t("编辑创建的文件，加入一行"),l("code",null,"Closing installer. Return code: 3010."),t("然后保存。")])],-1)),n[18]||(n[18]=l("figure",null,[l("img",{src:"https://pic.imgdb.cn/item/656ef3f4c458853aef8baa95.webp",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),n[19]||(n[19]=l("ol",{start:"4"},[l("li",null,[t("回到执行安装命令的窗口，重新安装 "),l("code",null,"windows-build-tools"),t(" 的步骤")])],-1)),n[20]||(n[20]=l("figure",null,[l("img",{src:"https://pic.imgdb.cn/item/656ef3fcc458853aef8bc9e0.webp",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),n[21]||(n[21]=l("h2",{id:"_2-安装-python3",tabindex:"-1"},[t("2. 安装 "),l("strong",null,"python3"),t(),l("a",{class:"header-anchor",href:"#_2-安装-python3","aria-label":'Permalink to "2. 安装 **python3**"'},"​")],-1)),n[22]||(n[22]=l("p",null,"网上部分文章说 node-gyp 应该用 python 版本 2.7 版本，可能是因为时效性的问题，目前 python2 已经不在维护了，并且 node-gyp 在官方文档上也说明应该用 python3。",-1)),n[23]||(n[23]=l("ol",null,[l("li",null,"在 C 盘 Users 目录下的 .windows-build-tools, 找到python相关的 msi 文件, 打开并卸载掉 python2, 因为 node-gyp@9 版本对应是 python3 的版本")],-1)),n[24]||(n[24]=l("figure",null,[l("img",{src:"https://pic.imgdb.cn/item/656ef403c458853aef8bdd53.webp",alt:"image.png",loading:"lazy",decoding:"async"})],-1)),n[25]||(n[25]=l("blockquote",null,[l("p",null,[t("这里需要注意，不同 window 系统存放的位置不一样，win11 的话是在 "),l("code",null,"C:\\Users\\[user]\\.windows-build-tools")])],-1)),n[26]||(n[26]=l("ol",{start:"2"},[l("li",null,[t("安装 python3 环境并配置环境变量 "),l("a",{href:"https://link.juejin.cn/?target=https%3A%2F%2Fwww.python.org%2F",target:"_blank",rel:"noreferrer"},"传送门")])],-1)),n[27]||(n[27]=l("h2",{id:"_3-安装-c-环境",tabindex:"-1"},[t("3. 安装 "),l("strong",null,"C++ 环境"),t(),l("a",{class:"header-anchor",href:"#_3-安装-c-环境","aria-label":'Permalink to "3. 安装 **C++ 环境**"'},"​")],-1)),n[28]||(n[28]=l("p",null,[t("有人可能会说，已经安装了 "),l("code",null,"windows-build-tools"),t(" 为什么还要安装 "),l("code",null,"C++"),t(" 环境，但不装这个还是无法识别 C++ 环境（汗")],-1)),n[29]||(n[29]=l("ol",null,[l("li",null,"点击 vs_BuildTools.exe（如果显示以安装则直接进行下一步）"),l("li",null,[t("下载 [visual studio 2017]("),l("a",{href:"http://xz.cncrk.com:8080/soft/keygen/visual",target:"_blank",rel:"noreferrer"},"http://xz.cncrk.com:8080/soft/keygen/visual"),t(" studio 2017.rar) 使用 "),l("code",null,"vs_Community.exe"),t(" 安装")])],-1)),n[30]||(n[30]=l("h2",{id:"_4-安装-node-gyp",tabindex:"-1"},[t("4. 安装 "),l("strong",null,"node-gyp"),t(),l("a",{class:"header-anchor",href:"#_4-安装-node-gyp","aria-label":'Permalink to "4. 安装 **node-gyp**"'},"​")],-1)),n[31]||(n[31]=l("div",{class:"language-sh vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"sh"),l("pre",{class:"shiki shiki-themes material-theme-darker material-theme-lighter vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-dark":"#FFCB6B","--shiki-light":"#E2931D"}},"npm"),l("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," install"),l("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," -g"),l("span",{style:{"--shiki-dark":"#C3E88D","--shiki-light":"#91B859"}}," node-gyp")])])]),l("button",{class:"collapse"})],-1))]),"main-header":o(()=>[i(e.$slots,"main-header")]),"main-header-after":o(()=>[i(e.$slots,"main-header-after")]),"main-nav":o(()=>[i(e.$slots,"main-nav")]),"main-content":o(()=>[i(e.$slots,"main-content")]),"main-content-after":o(()=>[i(e.$slots,"main-content-after")]),"main-nav-before":o(()=>[i(e.$slots,"main-nav-before")]),"main-nav-after":o(()=>[i(e.$slots,"main-nav-after")]),comment:o(()=>[i(e.$slots,"comment")]),footer:o(()=>[i(e.$slots,"footer")]),aside:o(()=>[i(e.$slots,"aside")]),"aside-custom":o(()=>[i(e.$slots,"aside-custom")]),default:o(()=>[i(e.$slots,"default")]),_:3},8,["frontmatter"])}}};export{B as default};
